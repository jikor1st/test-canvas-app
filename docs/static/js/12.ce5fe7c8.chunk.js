"use strict";(self.webpackChunktest_canvas_app=self.webpackChunktest_canvas_app||[]).push([[12],{12:function(n,e,t){t.r(e),t.d(e,{CanvasBasicDrawPage:function(){return y},CanvasColorWidthDrawPage:function(){return sn},CanvasOptimizedDrawPage:function(){return un},CanvasResizeDrawPage:function(){return nn},CanvasSmoothDrawPage:function(){return N},CanvasZoomDrawPage:function(){return Rn},IndexPage:function(){return s}});var r,i,u,o,c=t(168),a=t(31),f=t(184),s=function(){return(0,f.jsx)(l,{children:(0,f.jsxs)(d,{children:[(0,f.jsx)(v,{children:"HTML5 Canvas \ud14c\uc2a4\ud2b8"}),(0,f.jsx)(h,{children:"HTML5 Canvas 2D \ub4dc\ub85c\uc789\uc744 \ud14c\uc2a4\ud2b8\ud558\ub294 \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4."})]})})},l=a.ZP.div(r||(r=(0,c.Z)(["\n  padding: 0 20px;\n"]))),d=a.ZP.div(i||(i=(0,c.Z)(["\n  padding: 50px 0;\n  text-align: center;\n"]))),v=a.ZP.h1(u||(u=(0,c.Z)(["\n  font-size: 36px;\n  line-height: 40px;\n  font-weight: bold;\n"]))),h=a.ZP.p(o||(o=(0,c.Z)(["\n  font-size: 20px;\n  line-height: 24px;\n  margin-top: 20px;\n"]))),x=t(885),g=t(791),p=t(792),w=(0,p.W)((function(){return t.e(510).then(t.bind(t,510))})).BaseCanvas,y=function(){var n=(0,g.useRef)(null),e=(0,g.useRef)(null),t=(0,g.useRef)({width:0,height:0,pixelRatio:window.devicePixelRatio>1?2:1}),r=(0,g.useState)(!1),i=(0,x.Z)(r,2),u=i[0],o=i[1];(0,g.useEffect)((function(){c()}),[]);var c=function(){if(n.current){var r=window;!function(e,r){if(n.current){var i=e*t.current.pixelRatio,u=r*t.current.pixelRatio;n.current.width=i,n.current.height=u,t.current.width=i,t.current.height=u}}(r.innerWidth,r.innerHeight);var i,u=n.current.getContext("2d");if(u)(i=u)&&(i.scale(t.current.pixelRatio,t.current.pixelRatio),i.lineCap="round",i.strokeStyle="black",i.lineWidth=3,e.current=i)}};return(0,f.jsx)("div",{children:(0,f.jsx)(w,{ref:n,onPointerDown:function(n){var t=n.nativeEvent;if(o(!0),e.current){var r=t.offsetX,i=t.offsetY;e.current.beginPath(),e.current.moveTo(r,i)}},onPointerMove:function(n){var t=n.nativeEvent;if(u&&e.current){var r=t.offsetX,i=t.offsetY;e.current.lineTo(r,i),e.current.stroke()}},onPointerUp:function(){o(!1),e.current&&e.current.closePath()}})})},P=t(548);var m={pixelRatio:function(){return window.devicePixelRatio>1?2:1},objectXY:function(n,e){return{x:n,y:e}},drawDot:function(n,e){var t=e.x,r=e.y,i=e.radius;return n.beginPath(),n.arc(t,r,i,0,2*Math.PI,!0),n.fill(),n.closePath(),{context:n}},drawLineCurve:function(n,e){var t=e.points;n.beginPath(),n.moveTo(t[0].x,t[0].y);for(var r=1,i=t.length;r<i-2;r++){var u=t[r].x,o=t[r].y,c=(u+t[r+1].x)/2,a=(o+t[r+1].y)/2;n.quadraticCurveTo(u,o,c,a)}n.stroke()},drawLineQuadraticWithPoints:function(n,e){var t=e.startPoint,r=e.movePoints.slice(-2),i=r[0],u={x:(r[0].x+r[1].x)/2,y:(r[0].y+r[1].y)/2};return n.beginPath(),n.moveTo(t.x,t.y),n.quadraticCurveTo(i.x,i.y,u.x,u.y),n.stroke(),n.closePath(),{context:n,endPoint:u}},canvasDownloadImage:function(n,e){var t=e.imgName,r=function(n,e){var t=e.type,r=e.quality,i=null!==t&&void 0!==t?t:"image/jpeg",u=null!==r&&void 0!==r?r:1;try{return{url:n.toDataURL(i,u),type:i,quality:u}}catch(o){throw new Error}}(n,{type:e.imgType,quality:e.imgQuality}),i=r.url,u=r.type;try{var o=u.toString().trim().split("/")[1],c=document.createElement("a");c.download="".concat(null!==t&&void 0!==t?t:"download",".").concat(o),c.href=i,c.click(),c=void 0}catch(a){throw new Error("Failed to download img")}}};var R={rect:function(n,e){var t=e.x,r=e.y,i=e.width,u=e.height,o=e.fillStyle,c=e.strokeStyle,a=e.lineWidth,f=void 0===a?1:a;n.save(),n.beginPath(),n.rect(t,r,i,u),o&&(n.fillStyle=o,n.fill()),c&&(n.lineWidth=f,n.strokeStyle=c,n.stroke()),n.restore()},circle:function(n,e){var t=e.x,r=e.y,i=e.radius,u=e.startAngle,o=void 0===u?0:u,c=e.endAngle,a=void 0===c?2*Math.PI:c,f=e.fillStyle,s=e.strokeStyle,l=e.lineWidth,d=void 0===l?1:l;n.save(),n.beginPath(),n.arc(t,r,i,o,a),f&&(n.fillStyle=f,n.fill()),s&&(n.lineWidth=d,n.strokeStyle=s,n.stroke()),n.restore()}};var Z={setTransform:function(n,e){var t,r,i,u,o,c,a=e.scale,f=e.skew,s=e.move;n.setTransform(null!==(t=null===a||void 0===a?void 0:a.h)&&void 0!==t?t:1,null!==(r=null===f||void 0===f?void 0:f.h)&&void 0!==r?r:0,null!==(i=null===f||void 0===f?void 0:f.v)&&void 0!==i?i:0,null!==(u=null===a||void 0===a?void 0:a.v)&&void 0!==u?u:1,null!==(o=null===s||void 0===s?void 0:s.h)&&void 0!==o?o:0,null!==(c=null===s||void 0===s?void 0:s.v)&&void 0!==c?c:0)}};var C,S,W,b,j,k,z,D,E,B,Y,M,X,I,H,T,L,U,A,q,F={touches:function(n){n.nativeEvent}},Q={context:(0,t(683).Z)({},m),draw:R,event:F,method:Z},O=(0,P.R)((function(){return t.e(510).then(t.bind(t,510))})).BaseCanvas,_=window.devicePixelRatio>1?2:1,N=function(){var n=(0,g.useRef)(null),e=(0,g.useRef)(null),t=(0,g.useRef)(),r=(0,g.useRef)({width:0,height:0}),i=(0,g.useRef)([]),u=(0,g.useState)(!1),o=(0,x.Z)(u,2),c=o[0],a=o[1];(0,g.useEffect)((function(){s()}),[]);var s=function(){if(e.current&&n.current){var i=e.current;!function(n,e){var t=0,i=0;if(e===window){var u=e;t=u.innerWidth,i=u.innerHeight}else{var o=e;t=o.offsetWidth,i=o.offsetHeight}var c=t*_,a=i*_;n.width=c,n.height=a,r.current={width:c,height:a}}(i,n.current),function(n){var e=n.getContext("2d");e&&(e.scale(_,_),e.lineCap="round",e.strokeStyle="black",e.lineWidth=3,t.current=e)}(i)}};return(0,f.jsx)(G,{children:(0,f.jsx)(J,{ref:n,children:(0,f.jsx)(O,{ref:e,onPointerDown:function(n){var e=n.nativeEvent;if(t.current){a(!0);var r=e.offsetX,u=e.offsetY;Q.context.drawDot(t.current,{x:r,y:u,radius:t.current.lineWidth/2}),i.current.push({x:r,y:u})}},onPointerMove:function(n){var e=n.nativeEvent;if(c&&t.current){var r=e.offsetX,u=e.offsetY,o=i.current;o.push({x:r,y:u}),Q.context.drawLineCurve(t.current,{points:o})}},onPointerUp:function(){a(!1),i.current=[]}})})})},G=a.ZP.div(C||(C=(0,c.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),J=a.ZP.div(S||(S=(0,c.Z)(["\n  width: 100%;\n  height: 100%;\n  font-size: 0;\n"]))),K=t(762),V=t(474),$=(0,p.W)((function(){return t.e(510).then(t.bind(t,510))})).BaseCanvas,nn=function(){var n=(0,g.useRef)(null),e=(0,g.useRef)(null),t=(0,g.useRef)(),r=(0,g.useRef)({width:0,height:0,pixelRatio:Q.context.pixelRatio()}),i=(0,g.useRef)([]),u=(0,g.useRef)(),o=(0,g.useState)(!1),c=(0,x.Z)(o,2),a=c[0],s=c[1];(0,g.useEffect)((function(){return v(),h(),function(){u.current&&n.current&&(u.current.unobserve(n.current),u.current.disconnect())}}),[]);var l=function(n,t){if(e.current){var i=n*r.current.pixelRatio,u=t*r.current.pixelRatio;e.current.width=i,e.current.height=u,r.current.width=i,r.current.height=u}},d=function(n){n&&(n.scale(r.current.pixelRatio,r.current.pixelRatio),n.lineCap="round",n.strokeStyle="black",n.lineWidth=3,t.current=n)},v=function(){if(e.current&&n.current){var t=n.current,r=t.clientWidth,i=t.clientHeight;l(r,i);var u=e.current.getContext("2d");u&&d(u)}},h=function(){n.current&&(u.current=window.ResizeObserver?new ResizeObserver((function(n){var e,i=(0,K.Z)(n);try{for(i.s();!(e=i.n()).done;){var u=e.value;if(u.contentBoxSize){var o=Array.isArray(u.contentBoxSize)?u.contentBoxSize[0]:u.contentBoxSize;if(t.current)try{var c=t.current.getImageData(0,0,r.current.width,r.current.height);l(o.inlineSize,o.blockSize),d(t.current),t.current.putImageData(c,0,0)}catch(a){}}}}catch(a){i.e(a)}finally{i.f()}})):new V.Z((function(n){})),u.current.observe(n.current))};return(0,f.jsx)(en,{children:(0,f.jsx)(tn,{ref:n,children:(0,f.jsx)($,{ref:e,onPointerDown:function(n){var e=n.nativeEvent;if(t.current){s(!0);var r=e.offsetX,u=e.offsetY;Q.context.drawDot(t.current,{x:r,y:u,radius:t.current.lineWidth/2}),i.current.push({x:r,y:u})}},onPointerMove:function(n){var e=n.nativeEvent;if(a&&t.current){var r=e.offsetX,u=e.offsetY,o=i.current;o.push({x:r,y:u}),Q.context.drawLineCurve(t.current,{points:o})}},onPointerUp:function(){s(!1),i.current=[]}})})})},en=a.ZP.div(W||(W=(0,c.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),tn=a.ZP.div(b||(b=(0,c.Z)(["\n  width: 100%;\n  height: 100%;\n  font-size: 0;\n  position: relative;\n"]))),rn=(0,p.W)((function(){return t.e(510).then(t.bind(t,510))})).BaseCanvas,un=function(){var n=(0,g.useRef)(null),e=(0,g.useRef)(null),t=(0,g.useRef)(),r=(0,g.useRef)({stageWidth:0,stageHeight:0,pixelRatio:Q.context.pixelRatio()}),i=(0,g.useRef)(),u=(0,g.useRef)({x:0,y:0}),o=(0,g.useRef)([]),c=(0,g.useState)(!1),a=(0,x.Z)(c,2),s=a[0],l=a[1];(0,g.useEffect)((function(){return h(),p(),function(){}}),[]);var d=function(n,t){if(e.current){var i=n*r.current.pixelRatio,u=t*r.current.pixelRatio;e.current.width=i,e.current.height=u,r.current.stageWidth=i,r.current.stageHeight=u}},v=function(n){return n.scale(r.current.pixelRatio,r.current.pixelRatio),n.lineCap="round",n.strokeStyle="black",n.lineWidth=3,n},h=function(){if(e.current){var n=e.current,r=n.clientWidth,i=n.clientHeight;d(r,i);var u=e.current.getContext("2d");if(u){var o=v(u);t.current=o}}},p=function(){n.current&&(i.current=window.ResizeObserver?new ResizeObserver((function(n){var e,i=(0,K.Z)(n);try{for(i.s();!(e=i.n()).done;){var u=e.value;if(u.contentBoxSize){var o=Array.isArray(u.contentBoxSize)?u.contentBoxSize[0]:u.contentBoxSize;if(t.current)try{var c=t.current.getImageData(0,0,r.current.stageWidth,r.current.stageHeight);d(o.inlineSize,o.blockSize);var a=v(t.current);t.current=a,t.current.putImageData(c,0,0)}catch(f){}}}}catch(f){i.e(f)}finally{i.f()}})):new V.Z((function(n){})),i.current.observe(n.current))};return(0,f.jsx)(on,{children:(0,f.jsx)(cn,{ref:n,children:(0,f.jsx)(rn,{ref:e,onPointerDown:function(n){var e=n.nativeEvent;if(l(!0),t.current){var r=e.offsetX,i=e.offsetY;Q.context.drawDot(t.current,{x:r,y:i,radius:t.current.lineWidth/2}),o.current.push({x:r,y:i}),u.current={x:r,y:i}}},onPointerMove:function(n){var e=n.nativeEvent;if(s&&t.current){var r=e.offsetX,i=e.offsetY;if(o.current.push({x:r,y:i}),o.current.length>3){var c=Q.context.drawLineQuadraticWithPoints(t.current,{startPoint:u.current,movePoints:o.current}),a=c.context,f=c.endPoint;t.current=a,u.current=f}}},onPointerUp:function(){if(l(!1),t.current){if(o.current.length>3){var n=Q.context.drawLineQuadraticWithPoints(t.current,{startPoint:u.current,movePoints:o.current}).context;t.current=n}o.current=[],u.current={x:0,y:0}}}})})})},on=a.ZP.div(j||(j=(0,c.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),cn=a.ZP.div(k||(k=(0,c.Z)(["\n  width: 100%;\n  height: 100%;\n  font-size: 0;\n  position: relative;\n"]))),an=t(613),fn=(0,p.W)((function(){return t.e(510).then(t.bind(t,510))})).BaseCanvas,sn=function(){var n=(0,g.useRef)(null),e=(0,g.useRef)(null),t=(0,g.useRef)(),r=(0,g.useRef)({stageWidth:0,stageHeight:0,pixelRatio:Q.context.pixelRatio()}),i=(0,g.useRef)({x:0,y:0}),u=(0,g.useRef)([]),o=(0,g.useState)(!1),c=(0,x.Z)(o,2),a=c[0],s=c[1],l=(0,g.useState)("#000000"),d=(0,x.Z)(l,2),v=d[0],h=d[1],p=(0,g.useState)(3),w=(0,x.Z)(p,2),y=w[0],P=w[1];(0,g.useEffect)((function(){return m(),function(){u.current=[]}}),[]);var m=function(){if(e.current&&e.current&&n.current){var i=n.current;!function(n,t){if(e.current){var i=n*r.current.pixelRatio,u=t*r.current.pixelRatio;e.current.width=i,e.current.height=u,r.current.stageWidth=i,r.current.stageHeight=u}}(i.clientWidth,i.clientHeight);var u=e.current.getContext("2d");u&&(u.scale(r.current.pixelRatio,r.current.pixelRatio),u.lineCap="round",u.strokeStyle=v,u.fillStyle=v,u.lineWidth=y,t.current=u)}};(0,g.useEffect)((function(){t.current&&(t.current.strokeStyle=v,t.current.fillStyle=v)}),[v]),(0,g.useEffect)((function(){t.current&&(t.current.lineWidth=y)}),[y]);return(0,f.jsxs)(ln,{children:[(0,f.jsx)(an.Y,{onChangeColor:function(n){t.current&&h((function(e){return e!==n.target.value?n.target.value:e}))},onChangeRange:function(n){if(t.current){var e=parseInt(n.target.value,10);P((function(n){return n!==e?e:n}))}},onClickSave:function(){t.current&&e.current&&Q.context.canvasDownloadImage(e.current,{imgName:"test"})},color:v,lineWidth:y}),(0,f.jsx)(dn,{ref:n,children:(0,f.jsx)(fn,{ref:e,onPointerDown:function(n){var e=n.nativeEvent;if(s(!0),t.current){var r=e.offsetX,o=e.offsetY,c=Q.context.drawDot(t.current,{x:r,y:o,radius:t.current.lineWidth/2}).context;t.current=c,u.current.push({x:r,y:o}),i.current={x:r,y:o}}},onPointerMove:function(n){var e=n.nativeEvent;if(a&&t.current){var r=e.offsetX,o=e.offsetY;if(u.current.push({x:r,y:o}),u.current.length>3){var c=Q.context.drawLineQuadraticWithPoints(t.current,{startPoint:i.current,movePoints:u.current}),f=c.context,s=c.endPoint;t.current=f,i.current=s}}},onPointerUp:function(){if(a&&t.current){if(u.current.length>3){var n=Q.context.drawLineQuadraticWithPoints(t.current,{startPoint:i.current,movePoints:u.current}).context;t.current=n}s(!1),u.current=[],i.current={x:0,y:0}}}})})]})},ln=a.ZP.div(z||(z=(0,c.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),dn=a.ZP.div(D||(D=(0,c.Z)(["\n  width: 100%;\n  height: calc(100% - 50px);\n  font-size: 0;\n  position: relative;\n"]))),vn=g.memo((function(n){var e=n.modules;return(0,f.jsx)(hn,{children:(0,f.jsx)(xn,{children:g.Children.toArray(e)})})})),hn=a.ZP.div(E||(E=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  column-gap: 80px;\n  height: 50px;\n  padding: 0 20px;\n  border-bottom: 1px solid #cccccc;\n"]))),xn=a.ZP.div(B||(B=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  column-gap: 10px;\n"]))),gn=(a.ZP.div(Y||(Y=(0,c.Z)([""]))),a.ZP.div(M||(M=(0,c.Z)([""]))),a.ZP.input.attrs((function(){return{type:"color"}}))(X||(X=(0,c.Z)([""]))),a.ZP.div(I||(I=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  column-gap: 8px;\n"]))),a.ZP.input.attrs((function(){return{type:"range"}}))(H||(H=(0,c.Z)([""]))),g.memo((function(n){var e=n.zoom,t=n.onClickZoom;return(0,f.jsxs)(pn,{children:[(0,f.jsx)(yn,{onClick:function(){return t("+")},children:"+"}),(0,f.jsxs)(wn,{children:[parseFloat((100*e).toFixed(1)),"%"]}),(0,f.jsx)(yn,{onClick:function(){return t("-")},children:"-"})]})}))),pn=a.ZP.div(T||(T=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),wn=a.ZP.p(L||(L=(0,c.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 80px;\n  overflow: hidden;\n"]))),yn=a.ZP.button(U||(U=(0,c.Z)([""]))),Pn=(0,p.W)((function(){return t.e(510).then(t.bind(t,510))})).BaseCanvas,mn=200,Rn=function(){var n=(0,g.useRef)(null),e=(0,g.useRef)(null),t=(0,g.useRef)(null),r=(0,g.useRef)({down:[],move:[]}),i=(0,g.useRef)({down:0,move:0,up:mn}),u=(0,g.useRef)({down:{x:0,y:0},move:{x:0,y:0},up:{x:0,y:0}}),o=(0,g.useState)(!1),c=(0,x.Z)(o,2),a=c[0],s=c[1],l=(0,g.useState)(1),d=(0,x.Z)(l,2),v=d[0],h=d[1],p=(0,g.useState)({x:0,y:0}),w=(0,x.Z)(p,2),y=w[0],P=w[1];(0,g.useEffect)((function(){m()}),[]);var m=function(){if(e.current&&e.current&&n.current){var r=n.current.getBoundingClientRect();e.current.width=r.width,e.current.height=r.height;var i=e.current.getContext("2d");i&&(t.current=i,t.current.canvas.width=r.width,t.current.canvas.height=r.height,R())}},R=function(){if(t.current&&e.current){Q.draw.rect(t.current,{x:e.current.width/2-210,y:e.current.height/2-210,width:420,height:420,fillStyle:"#ffffff"})}},Z=function(n,e){return{x:(n.x+e.x)/2,y:(n.y+e.y)/2}},C=function(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))},S=function(n,e){var t=n.findIndex((function(n){return n.pointerId===e.pointerId}));-1===t?n.push(e):n[t]=e},W=function(n,e,t){return.1<=e&&e<=4?("function"===typeof t&&t(),parseFloat(e.toFixed(3))):n},b=function(n){return parseInt(n.toFixed(1))};!function(n,e,t){var r=(0,g.useRef)(!1),i=t.componentDidUpdateCondition,u=void 0===i||i,o=t.componentDidMountCondition,c=void 0===o||o;(0,g.useEffect)((function(){if(!r.current)return r.current=!0,void(c&&n());u&&n()}),e)}((function(){j({translate:y,zoomState:v})}),[y,v],{componentDidUpdateCondition:!0});var j=function(n){var r=n.translate,i=n.zoomState,u=void 0===i?1:i;t.current&&e.current&&(t.current.clearRect(0,0,e.current.width,e.current.height),Q.method.setTransform(t.current,{scale:{h:u,v:u},move:{h:r.x,v:r.y}}),R())},k=(0,g.useCallback)((function(n){var e=.1;"+"===n?h((function(n){return W(n,b(n+e),(function(){i.current.move=b(n+e)*mn}))})):"-"===n&&h((function(n){return W(n,b(n-e),(function(){i.current.move=b(n-e)*mn}))}))}),[]);return(0,f.jsxs)(Zn,{children:[(0,f.jsx)(vn,{modules:(0,g.useMemo)((function(){return[(0,f.jsx)(gn,{zoom:v,onClickZoom:k})]}),[v])}),(0,f.jsx)(Cn,{ref:n,children:(0,f.jsx)(Pn,{ref:e,onPointerDown:function(n){var e=n.nativeEvent;if(t.current&&(s(!0),S(r.current.down,e),r.current.down.length>=2)){var o=(0,x.Z)(r.current.down,2),c=o[0],a=o[1],f={x:c.offsetX,y:c.offsetY},l={x:a.offsetX,y:a.offsetY},d=Z(f,l),v=C(f,l);u.current.down=d,i.current.down=v}},onPointerMove:function(n){var o=n.nativeEvent;if(a&&t.current&&e.current&&(S(r.current.move,o),r.current.move.length>=2)){var c=(0,x.Z)(r.current.move,2),f=c[0],s=c[1],l={x:f.offsetX,y:f.offsetY},d={x:s.offsetX,y:s.offsetY},v=Z(l,d),g=C(l,d),p={x:v.x-u.current.down.x+u.current.up.x,y:v.y-u.current.down.y+u.current.up.y},w=g-i.current.down+i.current.up;u.current.move=p,P((function(n){return p.x!==n.x||p.y!==n.y?p:n}));var y=w/mn;h((function(n){return W(n,y,(function(){i.current.move=w}))}))}},onPointerUp:function(){s(!1),u.current.up=u.current.move,i.current.up=i.current.move,r.current.down=[],r.current.move=[]}})})]})},Zn=a.ZP.div(A||(A=(0,c.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),Cn=a.ZP.div(q||(q=(0,c.Z)(["\n  width: 100%;\n  height: calc(100% - 50px);\n  font-size: 0;\n  position: relative;\n  background: #cccccc;\n"])))}}]);
//# sourceMappingURL=12.ce5fe7c8.chunk.js.map